<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Playground | A.C.E.S. Framework</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.3s ease-out forwards; }
    </style>
</head>
<body class="bg-slate-50 min-h-screen p-4 md:p-10 font-sans text-slate-800">

    <div class="max-w-4xl mx-auto bg-white rounded-3xl shadow-xl overflow-hidden border border-slate-200">
        <div class="bg-blue-600 p-6 text-white flex justify-between items-center">
            <div>
                <h1 class="text-3xl font-black tracking-tight">A.C.E.S. Prompt Playground</h1>
                <p class="opacity-90 font-medium">Engineer your AI prompts like a pro.</p>
            </div>
            <div title="Safe Search Active" class="bg-blue-500 px-3 py-1 rounded-full hidden md:block text-sm font-bold">
                üõ°Ô∏è Safe Mode
            </div>
        </div>

        <div class="p-6 md:p-10 grid grid-cols-1 lg:grid-cols-2 gap-10">
            
            <div class="space-y-5">
                
                <button onclick="fillExample()" class="w-full bg-indigo-50 border-2 border-indigo-200 text-indigo-700 font-bold py-3 rounded-xl hover:bg-indigo-100 transition-all shadow-sm active:scale-95 flex justify-center items-center gap-2">
                    ‚ú® Stuck? Click here to see an example
                </button>

                <div>
                    <label class="block text-sm font-bold text-slate-700 mb-2 uppercase tracking-wide">üëë Authority</label>
                    <select id="input-role" onchange="toggleOtherRole()" class="w-full border-2 border-slate-200 rounded-xl p-3 focus:border-blue-500 outline-none transition-all">
                        <option value="">-- Select a Role --</option>
                        <option value="an expert science teacher">Expert Teacher</option>
                        <option value="a historical figure">Historical Figure</option>
                        <option value="other">Other...</option>
                    </select>
                    <input type="text" id="input-role-other" placeholder="e.g. Pirate Captain, Head Chef..." class="hidden mt-3 w-full border-2 border-blue-200 bg-blue-50 rounded-xl p-3 outline-none fade-in">
                </div>

                <div>
                    <label class="block text-sm font-bold text-slate-700 mb-2 uppercase tracking-wide">üéØ Core Task</label>
                    <textarea id="input-action" rows="2" placeholder="What exactly should the AI do?" class="w-full border-2 border-slate-200 rounded-xl p-3 focus:border-blue-500 outline-none transition-all"></textarea>
                </div>

                <div>
                    <label class="block text-sm font-bold text-slate-700 mb-2 uppercase tracking-wide">üåç Environment</label>
                    <textarea id="input-context" rows="2" placeholder="Who is this for?" class="w-full border-2 border-slate-200 rounded-xl p-3 focus:border-blue-500 outline-none transition-all"></textarea>
                </div>

                <div>
                    <label class="block text-sm font-bold text-slate-700 mb-2 uppercase tracking-wide">üìù Specifications</label>
                    <textarea id="input-expectation" rows="2" placeholder="Length, tone, format..." class="w-full border-2 border-slate-200 rounded-xl p-3 focus:border-blue-500 outline-none transition-all"></textarea>
                </div>

                <div class="flex gap-4 pt-2">
                    <button onclick="clearForm()" class="px-4 py-2 text-sm font-bold text-slate-400 hover:text-red-500 transition">Reset</button>
                    <button onclick="runVibeCheck()" class="flex-grow bg-amber-400 hover:bg-amber-500 text-slate-900 font-black py-3 rounded-xl transition-all shadow-md active:scale-95">
                        üîç RUN VIBE CHECK
                    </button>
                </div>
                
                <div id="vibe-check-area" class="hidden p-4 rounded-xl text-sm italic fade-in"></div>
            </div>

            <div class="flex flex-col h-full">
                <div class="flex justify-between items-end mb-3">
                    <span class="text-sm font-black text-slate-400 uppercase">Live Output</span>
                    <div id="score-badge" class="px-4 py-1 rounded-full text-xs font-black bg-slate-100 text-slate-400 transition-all">SCORE: 0%</div>
                </div>
                
                <div id="output-preview" class="flex-grow bg-slate-900 text-green-400 p-6 rounded-2xl font-mono text-sm leading-relaxed shadow-inner min-h-[300px] border-4 border-slate-800 overflow-y-auto whitespace-pre-wrap">
                    // Start filling in the ACES to see your prompt...
                </div>

                <button onclick="copyToClipboard()" id="copy-btn" class="mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-black py-4 rounded-2xl shadow-lg transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed">
                    COPY PROMPT
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- PROFANITY FILTER ---
        const badWords = ["stupid", "dumb", "crap", "poop", "idiot", "sucks"]; 
        const profanityRegex = new RegExp('\\b(' + badWords.join('|') + ')\\b', 'gi');

        function censorText(text) { return text.replace(profanityRegex, '***'); }
        function hasProfanity(text) { return profanityRegex.test(text); }

        // --- PRE-BUILT EXAMPLES ---
        const examples = [
            {
                roleDrop: "other",
                roleText: "Pirate Captain",
                action: "Explain how the water cycle works (evaporation, condensation, and precipitation).",
                context: "I am a 5th grader who loves the ocean but struggles to understand science.",
                expectation: "Use lots of fun pirate slang. Keep it under 3 paragraphs and end with a dramatic 'Arrr!'"
            },
            {
                roleDrop: "other",
                roleText: "Passionate Head Chef",
                action: "Explain the process of photosynthesis.",
                context: "I am writing a study guide for my 7th-grade biology class.",
                expectation: "Use cooking metaphors (like ingredients, recipes, and ovens). Format it as a recipe with bullet points."
            },
            {
                roleDrop: "an expert science teacher",
                roleText: "",
                action: "Summarize the top 3 causes of the American Revolution.",
                context: "I need to review for my 8th-grade history final exam tomorrow. I am very stressed.",
                expectation: "Keep it highly encouraging and simple to read. Give me the causes in a numbered list with a 1-sentence summary for each."
            }
        ];

        // --- UI ELEMENTS ---
        const roleSelect = document.getElementById('input-role');
        const roleOther = document.getElementById('input-role-other');
        const actionEl = document.getElementById('input-action');
        const contextEl = document.getElementById('input-context');
        const expectationEl = document.getElementById('input-expectation');
        const previewEl = document.getElementById('output-preview');
        const scoreBadge = document.getElementById('score-badge');
        const vibeArea = document.getElementById('vibe-check-area');
        const copyBtn = document.getElementById('copy-btn');

        let isFlagged = false;

        // --- CORE LOGIC ---
        function toggleOtherRole() {
            if (roleSelect.value === 'other') {
                roleOther.classList.remove('hidden');
            } else {
                roleOther.classList.add('hidden');
                roleOther.value = '';
            }
            updatePreview();
        }

        function updatePreview() {
            let selectedRole = roleSelect.value === 'other' ? roleOther.value.trim() : roleSelect.value;
            const action = actionEl.value.trim();
            const context = contextEl.value.trim();
            const expectation = expectationEl.value.trim();

            let score = 0;
            if (selectedRole) score += 25;
            if (action.length > 3) score += 25;
            if (context.length > 3) score += 25;
            if (expectation.length > 3) score += 25;

            const fullText = `${selectedRole} ${action} ${context} ${expectation}`;
            isFlagged = hasProfanity(fullText);

            if (isFlagged) {
                scoreBadge.innerText = `‚ö†Ô∏è FLAGGED`;
                scoreBadge.className = `px-4 py-1 rounded-full text-xs font-black bg-red-500 text-white`;
                copyBtn.disabled = true;
            } else {
                scoreBadge.innerText = `SCORE: ${score}%`;
                scoreBadge.className = `px-4 py-1 rounded-full text-xs font-black transition-all ${score === 100 ? 'bg-green-500 text-white' : 'bg-slate-100 text-slate-400'}`;
                copyBtn.disabled = false;
            }

            if (!selectedRole && !action && !context && !expectation) {
                previewEl.innerText = "// Start filling in the ACES fields to see your prompt...";
                return;
            }

            let finalPrompt = "";
            if (selectedRole) finalPrompt += `Act as ${censorText(selectedRole)}.\n\n`;
            if (action) finalPrompt += `CORE TASK: ${censorText(action)}\n\n`;
            if (context) finalPrompt += `ENVIRONMENT: ${censorText(context)}\n\n`;
            if (expectation) finalPrompt += `SPECIFICATIONS: ${censorText(expectation)}`;

            previewEl.innerText = finalPrompt;
        }

        // --- NEW: FILL EXAMPLE FUNCTION ---
        function fillExample() {
            // Pick a random example from the array
            const randomEx = examples[Math.floor(Math.random() * examples.length)];
            
            // Fill the inputs
            roleSelect.value = randomEx.roleDrop;
            
            if (randomEx.roleDrop === "other") {
                roleOther.classList.remove('hidden');
                roleOther.value = randomEx.roleText;
            } else {
                roleOther.classList.add('hidden');
                roleOther.value = '';
            }

            actionEl.value = randomEx.action;
            contextEl.value = randomEx.context;
            expectationEl.value = randomEx.expectation;

            // Hide the vibe check if it was open, and update the preview
            vibeArea.classList.add('hidden');
            updatePreview();
        }

        function runVibeCheck() {
            vibeArea.classList.remove('hidden');
            
            if (isFlagged) {
                vibeArea.className = "p-4 rounded-xl text-sm font-bold bg-red-100 border-2 border-red-300 text-red-800 fade-in";
                vibeArea.innerHTML = "üö® VIBE CHECK FAILED: Inappropriate language detected. Please clean up your prompt.";
                return;
            }

            vibeArea.className = "p-4 rounded-xl bg-amber-50 border-2 border-amber-200 text-sm italic text-amber-900 fade-in";
            let feedback = "";

            if (!roleSelect.value) {
                feedback = "ü§î Your AI doesn't know who it's supposed to be. Try picking a Role!";
            } else if (actionEl.value.length < 10) {
                feedback = "üèÉ Your Core Task is a bit short. Be more descriptive about what the AI should actually do.";
            } else if (contextEl.value.length < 5) {
                feedback = "ü§∑ Who is this for? Adding an Environment helps the AI use the right level of detail.";
            } else if (expectationEl.value.length < 5) {
                feedback = "üìê Tell the AI exactly how you want the answer (e.g., 'Use bullet points').";
            } else {
                feedback = "üî• VIBE CHECK PASSED. This prompt is specific, framed with authority, and clearly formatted. Nice work!";
                vibeArea.className = "p-4 rounded-xl bg-green-50 border-2 border-green-200 text-sm italic text-green-900 fade-in";
            }

            vibeArea.innerHTML = `<strong>Vibe Check:</strong> ${feedback}`;
        }

        [roleSelect, roleOther, actionEl, contextEl, expectationEl].forEach(input => {
            input.addEventListener('input', () => {
                vibeArea.classList.add('hidden');
                updatePreview();
            });
        });

        function copyToClipboard() {
            if (isFlagged) return; // Failsafe
            
            navigator.clipboard.writeText(previewEl.innerText).then(() => {
                const oldText = copyBtn.innerText;
                copyBtn.innerText = "COPIED TO CLIPBOARD!";
                copyBtn.classList.replace('bg-blue-600', 'bg-green-600');
                setTimeout(() => {
                    copyBtn.innerText = oldText;
                    copyBtn.classList.replace('bg-green-600', 'bg-blue-600');
                }, 2000);
            });
        }

        function clearForm() {
            [roleSelect, roleOther, actionEl, contextEl, expectationEl].forEach(el => el.value = '');
            roleOther.classList.add('hidden');
            vibeArea.classList.add('hidden');
            updatePreview();
        }
    </script>
</body>
</html>